// =============================================================================
// LAYOUT STANDALONE COMPONENT
// =============================================================================

@import '../../../../styles/variables';
@import '../../../../styles/mixins';

// -----------------------------------------------------------------------------
// MIXINS ADICIONALES
// -----------------------------------------------------------------------------

// Mixin para transiciones comunes
@mixin theme-transition {
  transition: 
    background-color 0.8s cubic-bezier(0.4, 0, 0.2, 1),
    color 0.8s cubic-bezier(0.4, 0, 0.2, 1),
    border-color 0.8s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

// Mixin para estilos de tema oscuro
@mixin dark-theme-styles {
  .sidebar-container.dark-theme &,
  [data-theme='dark'] &,
  &.dark-theme {
    @content;
  }
}

// -----------------------------------------------------------------------------
// ESTILOS PARA EL BOTÓN TOGGLE DE TEMA
// -----------------------------------------------------------------------------

.theme-toggle-btn {
   min-width: 48px !important;
   width: 48px !important;
   height: 48px !important;
   border-radius: $border-radius-full !important;
   background-color: rgba(var(--primary-color), 0.1) !important;
   border: 1px solid rgba(var(--primary-color), 0.2) !important;
   color: var(--text-primary) !important;
   transition: all $transition-base !important;
   display: flex !important;
   align-items: center !important;
   justify-content: center !important;

   &:hover {
      background-color: rgba(var(--primary-color), 0.2) !important;
      border-color: rgba(var(--primary-color), 0.4) !important;
      transform: scale(1.1) !important;
      box-shadow: 0 4px 12px rgba(var(--primary-color), 0.3) !important;
   }

   &:focus {
      outline: 1px solid var(--primary-color) !important;
      outline-offset: 0px !important;
   }

   mat-icon {
      font-size: 24px !important;
      width: 24px !important;
      height: 24px !important;
      transition: transform $transition-base !important;
   }

   &:hover mat-icon {
      transform: rotate(180deg) !important;
   }

   // Estilos específicos para tema oscuro
   @include dark-theme-styles {
      background-color: rgba($dark-primary-500, 0.2) !important;
      border-color: rgba($dark-primary-500, 0.3) !important;
      color: $dark-text-primary !important;

      &:hover {
         background-color: rgba($dark-primary-400, 0.3) !important;
         border-color: rgba($dark-primary-400, 0.5) !important;
         box-shadow: 0 4px 12px rgba($dark-primary-500, 0.4) !important;
      }
   }
}

// Layout Container
.layout-container {
   width: 100vw;
   height: 100vh;
   overflow: hidden;
   position: relative;
   display: flex;
   background-color: var(--background-primary);
   color: var(--text-primary);
}

// Sidebar Wrapper
.sidebar-wrapper {
   position: relative;
   z-index: $z-index-fixed;
   @include smooth-transition(transform);

   @media (max-width: #{$breakpoint-md - 1px}) {
      display: none;
   }
}

// Sidebar Container
.sidebar-container {
   position: fixed;
   top: 0;
   left: 0;
   width: 250px;
   height: 100vh;
   background: linear-gradient(135deg, $primary-500 0%, $primary-700 100%);
   color: $white;
   padding: $spacing-5;
   overflow-y: auto;
   z-index: $z-index-fixed;
   box-shadow: $shadow-lg;
   @include theme-transition;
   -webkit-overflow-scrolling: touch;
   display: flex;
   flex-direction: column;
   
   @media (max-width: #{$breakpoint-md - 1px}) {
      display: none;
   }

   // Tema oscuro
   &.dark-theme {
      background: linear-gradient(135deg, $dark-primary-500 0%, $dark-primary-700 100%);
      color: $dark-text-primary;
      box-shadow: 0 4px 20px rgba($dark-primary-900, 0.3);
      
      &::before {
         opacity: 1;
      }
   }

   // Asegurar que el contenido esté por encima del pseudo-elemento
   > * {
      position: relative;
      z-index: 1;
   }

   // Custom scrollbar
   &::-webkit-scrollbar {
      width: 6px;
   }

   &::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
   }

   &::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
   }
}

// Profile Section
.profile-section {
   text-align: center;
   margin-bottom: $spacing-8;
   padding-bottom: $spacing-5;
   border-bottom: 1px solid rgba(255, 255, 255, 0.2);

   @include dark-theme-styles {
      border-bottom-color: rgba($dark-text-primary, 0.2);
   }

   .avatar-container {
      margin-bottom: $spacing-4;

      .avatar {
         width: 150px;
         height: 150px;
         border-radius: $border-radius-full;
         border: 3px solid rgba(255, 255, 255, 0.3);
         object-fit: cover;
         @include hover-lift;
         @include theme-transition;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
         
         @media (max-width: #{$breakpoint-lg}) {
            width: 100px;
            height: 100px;
         }

         &:hover {
            border-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.05);
         }

         @include dark-theme-styles {
            border-color: rgba($dark-text-primary, 0.3);

            &:hover {
               border-color: rgba($dark-text-primary, 0.6);
            }
         }
      }
   }

   .name {
      margin: $spacing-3 0 $spacing-2 0;
      @include text-2xl;
      font-weight: $font-weight-bold;
      font-family: $font-family-primary;
      color: $white;
      @include theme-transition;
      letter-spacing: 0.5px;

      @include dark-theme-styles {
         color: $dark-text-primary;
      }
   }

   .title {
      margin: 0;
      @include text-lg;
      color: rgba(255, 255, 255, 0.9);
      font-weight: $font-weight-medium;
      font-family: $font-family-secondary;
      @include theme-transition;
      letter-spacing: 0.3px;

      @include dark-theme-styles {
         color: rgba($dark-text-primary, 0.9);
      }
   }
}

// Section Titles
.section-title {
   @include text-lg;
   font-weight: $font-weight-bold;
   font-family: $font-family-secondary;
   margin-bottom: 0px !important;
   text-transform: uppercase;
   letter-spacing: 1px;
   @include theme-transition;

   @include dark-theme-styles {
      color: rgba($dark-text-primary, 0.9);
   }
}

// Contact Section
.contact-section {
   margin-bottom: $spacing-8;
   overflow: visible; // Asegura que los iconos no se corten

   .contact-item {
      display: flex;
      align-items: center;
      margin-bottom: $spacing-3;
      padding: $spacing-3; // Simplificado el padding
      border-radius: $border-radius-md;
      @include smooth-transition(background-color);
      @include focus-visible;
      min-height: 44px; // Altura mínima para asegurar espacio suficiente

      &:hover {
         background-color: rgba(255, 255, 255, 0.1);
      }

      .sidebar-container.dark-theme & {
         &:hover {
            background-color: rgba($dark-text-primary, 0.1);
         }
      }

      mat-icon {
         margin-right: $spacing-3;
         font-size: 22px; // Aumentado para mejor visibilidad
         width: 22px; // Aumentado para mejor visibilidad
         height: 22px; // Aumentado para mejor visibilidad
         color: rgba(255, 255, 255, 0.95); // Mayor opacidad
         transition: color 0.8s cubic-bezier(0.4, 0, 0.2, 1);
         flex-shrink: 0; // Evita que el icono se comprima
         display: flex; // Asegura alineamiento correcto
         align-items: center; // Centra verticalmente
         justify-content: center; // Centra horizontalmente
         line-height: 1; // Elimina espaciado extra

         .sidebar-container.dark-theme & {
            color: rgba($dark-text-primary, 0.95);
         }
      }

      span {
         @include text-base;
         color: rgba(255, 255, 255, 0.95);
         font-weight: $font-weight-medium;
         font-family: $font-family-primary;
         word-break: break-word;
         transition: color 0.8s cubic-bezier(0.4, 0, 0.2, 1);
         line-height: 1.4;

         .sidebar-container.dark-theme & {
            color: rgba($dark-text-primary, 0.95);
         }
      }
   }
}

// Social Section
.social-section {
   .social-links {
      display: flex;
      flex-direction: column;
      gap: $spacing-2;

      .social-link {
         display: flex;
         align-items: center;
         padding: $spacing-3;
         border-radius: $border-radius-md;
         transition: background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                     transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                     color 0.8s cubic-bezier(0.4, 0, 0.2, 1);
         @include focus-visible;
         text-decoration: none;
         color: inherit;

         &:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
            text-decoration: none;
         }

         .sidebar-container.dark-theme & {
            &:hover {
               background-color: rgba($dark-text-primary, 0.1);
            }
         }

         mat-icon {
            margin-right: $spacing-3;
            font-size: 20px; // Aumentado de 18px a 20px
            width: 20px; // Aumentado de 18px a 20px
            height: 20px; // Aumentado de 18px a 20px
         }

         span {
            @include text-base; // Aumentado de text-sm a text-base
            font-weight: $font-weight-medium;
            font-family: $font-family-primary;
            line-height: 1.4; // Añadido altura de línea
         }
      }
   }
}

// Actions Section
.actions-section {
   position: sticky;
   bottom: $spacing-5;
   margin-top: auto;
   padding-top: $spacing-5;
   
   .action-btn {
      position: relative;
      width: 100%;
      margin-bottom: $spacing-3;
      @include text-base; // Aumentado de text-sm a text-base
      font-weight: $font-weight-semibold; // Añadido peso de fuente
      font-family: $font-family-secondary;
      padding: $spacing-4; // Aumentado de $spacing-3 a $spacing-4
      border-radius: $border-radius-lg;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                  color 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      @include focus-visible;
      overflow: hidden;
      z-index: 1;
      letter-spacing: 0.5px; // Añadido espaciado entre letras

      // Pseudo-elemento para transición suave del fondo
      &::before {
         content: '';
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         opacity: 0;
         transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
         z-index: -1;
         border-radius: inherit;
      }

      // Asegurar que el contenido esté por encima del pseudo-elemento
      > * {
         position: relative;
         z-index: 1;
      }

      &:hover {
         @include hover-lift;
      }

      // Tema oscuro
      .sidebar-container.dark-theme & {
         &::before {
            opacity: 1;
         }
      }

      mat-icon {
         margin-right: $spacing-2;
         font-size: 16px;
         width: 16px;
         height: 16px;
      }
   }
}

// Main Content
.main-content {
   flex: 1;
   display: flex;
   flex-direction: column;
   margin-left: 250px;
   width: calc(100vw - 250px);
   height: 100vh;
   overflow: hidden;
   background-color: var(--background-primary);
   color: var(--text-primary);
   @include theme-transition;

   @media (max-width: #{$breakpoint-md - 1px}) {
      margin-left: 0;
      width: 100vw;
   }

   // Tema oscuro
   &.dark-theme {
      background-color: $dark-background-primary;
      color: $dark-text-primary;
   }
}

// Navbar Container
.navbar-container {
   position: fixed;
   top: 0;
   left: 250px;
   right: 0;
   z-index: $z-index-sticky;
   background-color: $primary-600;
   color: $white;
   height: 64px;
   box-shadow: $shadow-md;
   transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
   @include theme-transition;
   overflow: hidden;

   @media (max-width: #{$breakpoint-md - 1px}) {
      left: 0;
   }

   // Tema oscuro
   &.dark-theme {
      background-color: $dark-primary-600;
      color: $dark-text-primary;
      box-shadow: 0 2px 10px rgba($dark-primary-900, 0.3);
   }

   .container-fluid {
      height: 100%;
      padding: 0 $spacing-5;
      max-width: none;
   }

   .row {
      height: 100%;
      margin: 0;
   }

   .brand-section {
      width: 100%;
      gap: $spacing-2;
      
      @media (max-width: #{$breakpoint-md - 1px}) {
         justify-content: center !important;
      }
   }

   .navbar-brand {
      @include text-xl;
      font-family: $font-family-mono;
      font-weight: $font-weight-bold;
      font-size: x-large;
      color: $white;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: 1.2;
      display: block;
      @include theme-transition;

      @media (max-width: #{$breakpoint-md - 1px}) {
         @include text-lg;
      }

      @media (max-width: #{$breakpoint-sm - 1px}) {
         @include text-base;
      }

      @include dark-theme-styles {
         color: $dark-text-primary;
      }
   }

   .navbar-nav {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;

      .d-flex {
         width: 100%;
         flex-wrap: nowrap;
         align-items: center;
      }
   }

   .nav-link-btn {
      color: $white !important;
      border-radius: $border-radius-lg;
      padding: $spacing-2 $spacing-4;
      @include theme-transition;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      @include focus-visible;
      min-width: auto;
      margin: 0 $spacing-1;
      @include text-base;
      white-space: nowrap;

      &:hover {
         background-color: rgba(255, 255, 255, 0.1);
         transform: translateY(-1px);
      }

      &.active-link {
         background-color: rgba(255, 255, 255, 0.2);
         font-weight: $font-weight-semibold;
      }

      @include dark-theme-styles {
         color: $dark-text-primary !important;

         &:hover {
            background-color: rgba($dark-text-primary, 0.1);
         }

         &.active-link {
            background-color: rgba($dark-text-primary, 0.2);
         }
      }

      mat-icon {
         font-size: 18px;
         width: 18px;
         height: 18px;
         margin-right: $spacing-2;
      }

      span {
         @include text-base;
      }
   }
}

// Page Content
.page-content {
   flex: 1;
   overflow-y: auto;
   overflow-x: hidden;
   margin-top: 64px;
   height: calc(100vh - 64px);
   background-color: var(--background-secondary);
   @include custom-scrollbar;
   transition: background-color 0.8s cubic-bezier(0.4, 0, 0.2, 1);

   // Tema oscuro
   &.dark-theme {
      background-color: $dark-background-secondary;
   }
}

// Content Container
.content-container {
   width: 100%;
   transition: background-color 0.8s cubic-bezier(0.4, 0, 0.2, 1),
               color 0.8s cubic-bezier(0.4, 0, 0.2, 1);

   // Tema oscuro
   &.dark-theme {
      color: $dark-text-primary;
   }
}

// Mixins para media queries
@mixin responsive-md-down {
   @media (max-width: #{$breakpoint-md - 1px}) {
      @content;
   }
}

@mixin responsive-sm-down {
   @media (max-width: #{$breakpoint-sm - 1px}) {
      @content;
   }
}

@mixin responsive-xs-down {
   @media (max-width: 480px) {
      @content;
   }
}

@mixin responsive-md-to-sm {
   @media (max-width: #{$breakpoint-lg - 1px}) and (min-width: #{$breakpoint-sm}) {
      @content;
   }
}

// Responsive Design
@include responsive-md-down {
   .page-content {
      margin-top: 100px;
      height: calc(100vh - 100px);
   }

   .navbar-container {
      min-height: 100px;

      .container-fluid {
         padding: $spacing-2 $spacing-3;
      }

      .row {
         flex-direction: column;
         align-items: center;
      }

      .navbar-brand {
         @include text-lg;
         font-weight: $font-weight-bold;
      }
   }

   .main-content {
      margin-left: 0;
      width: 100vw;
   }

}

@include responsive-sm-down {
   .page-content {
      margin-top: 100px;
      height: calc(100vh - 100px);
   }

   .navbar-container {
      min-height: 100px;

      .container-fluid {
         padding: $spacing-2;
      }

      .row {
         flex-direction: column;
         align-items: center;
      }

      .nav-link-btn {
         padding: $spacing-2 $spacing-3;
         @include text-xs;

         .nav-icon {
            font-size: 20px;
            width: 20px;
            height: 20px;
         }
      }
   }
}

// Extra small screens
@include responsive-xs-down {
   .page-content {
      margin-top: 95px;
      height: calc(100vh - 95px);
   }

   .sidebar-container {
      .profile-section {
         .name {
            @include text-lg;
            letter-spacing: 0.2px;
         }

         .title {
            @include text-sm;
            letter-spacing: 0.1px;
         }
      }

      .section-title {
         @include text-sm;
         letter-spacing: 0.6px;
      }

      .contact-item,
      .social-link {
         mat-icon {
            font-size: 20px;
            width: 20px;
            height: 20px;
         }

         span {
            @include text-xs;
            line-height: 1.2;
         }
      }

      .action-btn {
         @include text-xs;
         letter-spacing: 0.2px;
      }
   }

   .navbar-container {
      min-height: 95px;

      .container-fluid {
         padding: $spacing-1;
      }

      .nav-link-btn {
         padding: $spacing-2 $spacing-2;

         .nav-icon {
            font-size: 24px;
            width: 24px;
            height: 24px;
         }
      }
   }
}

// Medium screens adjustments
@include responsive-md-to-sm {
   .navbar-container {
      .nav-link-btn {
         padding: $spacing-1 $spacing-2;
         @include text-sm;

         span {
            @include text-sm;
         }
      }
   }
}
