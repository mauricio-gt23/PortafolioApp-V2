// =============================================================================
// ESTILOS GLOBALES - PORTAFOLIO APP V2
// =============================================================================

// -----------------------------------------------------------------------------
// IMPORTACIONES DE FUENTES
// -----------------------------------------------------------------------------

// Google Fonts
@import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;600;700&display=swap');

// Material Icons
@import url('https://fonts.googleapis.com/icon?family=Material+Icons');
@import url('https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200');

// -----------------------------------------------------------------------------
// IMPORTACIONES DE BOOTSTRAP (SOLO GRID Y UTILIDADES)
// -----------------------------------------------------------------------------

// Bootstrap - Funciones, variables, mixins y componentes necesarios
@import 'bootstrap/scss/functions';
@import 'bootstrap/scss/variables';
@import 'bootstrap/scss/mixins';
@import 'bootstrap/scss/carousel';

// -----------------------------------------------------------------------------
// IMPORTACIONES DEL SISTEMA DE DISEÑO PERSONALIZADO
// -----------------------------------------------------------------------------

// Variables y mixins personalizados
@import 'styles/variables';
@import 'styles/mixins';

// Tema de Angular Material personalizado
@import 'styles/material-theme';

// Utilidades personalizadas
@import 'styles/utilities';

// -----------------------------------------------------------------------------
// ESTILOS BASE GLOBALES
// -----------------------------------------------------------------------------

// Reset y configuración base
*,
*::before,
*::after {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
}

// Configuración de variables CSS personalizadas
:root {
   @include adaptive-colors;

   // Variables de espaciado
   --spacing-xs: #{$spacing-1};
   --spacing-sm: #{$spacing-2};
   --spacing-md: #{$spacing-4};
   --spacing-lg: #{$spacing-6};
   --spacing-xl: #{$spacing-8};

   // Variables de tipografía
   --font-family-primary: #{$font-family-primary};
   --font-family-secondary: #{$font-family-secondary};
   --font-family-mono: #{$font-family-mono};

   // Variables de transición
   --transition-fast: #{$transition-fast};
   --transition-base: #{$transition-base};
   --transition-slow: #{$transition-slow};
}

// Configuración HTML y Body
html {
   height: 100%;
   font-size: 16px; // Base para rem
   scroll-behavior: smooth;
   -webkit-text-size-adjust: 100%;
   -ms-text-size-adjust: 100%;
}

body {
   height: 100%;
   width: 100%;
   margin: 0;
   padding: 0;
   font-family: var(--font-family-primary);
   font-size: $font-size-base;
   font-weight: $font-weight-regular;
   line-height: $line-height-normal;
   color: var(--text-primary);
   background-color: var(--background-primary);
   overflow-x: hidden;
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
   text-rendering: optimizeLegibility;
}

// -----------------------------------------------------------------------------
// TIPOGRAFÍA GLOBAL
// -----------------------------------------------------------------------------

// Headings responsivos
h1,
.h1 {
   @include text-5xl;
   font-weight: $font-weight-bold;
   color: var(--text-primary);
   margin-bottom: $spacing-6;

   @media (min-width: $breakpoint-md) {
      @include text-6xl;
   }
}

h2,
.h2 {
   @include text-4xl;
   font-weight: $font-weight-semibold;
   color: var(--text-primary);
   margin-bottom: $spacing-5;

   @media (min-width: $breakpoint-md) {
      @include text-5xl;
   }
}

h3,
.h3 {
   @include text-3xl;
   font-weight: $font-weight-semibold;
   color: var(--text-primary);
   margin-bottom: $spacing-4;

   @media (min-width: $breakpoint-md) {
      @include text-4xl;
   }
}

h4,
.h4 {
   @include text-2xl;
   font-weight: $font-weight-medium;
   color: var(--text-primary);
   margin-bottom: $spacing-4;

   @media (min-width: $breakpoint-md) {
      @include text-3xl;
   }
}

h5,
.h5 {
   @include text-xl;
   font-weight: $font-weight-medium;
   color: var(--text-primary);
   margin-bottom: $spacing-3;

   @media (min-width: $breakpoint-md) {
      @include text-2xl;
   }
}

h6,
.h6 {
   @include text-lg;
   font-weight: $font-weight-medium;
   color: var(--text-primary);
   margin-bottom: $spacing-3;

   @media (min-width: $breakpoint-md) {
      @include text-xl;
   }
}

// Párrafos y texto base
p {
   @include text-base;
   color: var(--text-secondary);
   margin-bottom: $spacing-4;

   &:last-child {
      margin-bottom: 0;
   }
}

// Enlaces
a {
   color: $primary-500;
   text-decoration: none;
   @include smooth-transition(color);
   @include focus-visible;

   &:hover {
      color: $primary-600;
      text-decoration: underline;
   }

   &:active {
      color: $primary-700;
   }
}

// Texto pequeño
small,
.small {
   @include text-sm;
   color: var(--text-secondary);
}

// Código
code {
   font-family: var(--font-family-mono);
   font-size: 0.875em;
   background-color: $gray-100;
   padding: $spacing-1 $spacing-2;
   border-radius: $border-radius-sm;
   color: $primary-700;
}

pre {
   font-family: var(--font-family-mono);
   background-color: $gray-100;
   padding: $spacing-4;
   border-radius: $border-radius-base;
   overflow-x: auto;
   margin-bottom: $spacing-4;

   code {
      background: none;
      padding: 0;
   }
}

// -----------------------------------------------------------------------------
// ELEMENTOS DE FORMULARIO GLOBALES
// -----------------------------------------------------------------------------

input,
textarea,
select {
   font-family: inherit;
   @include focus-visible;
}

// -----------------------------------------------------------------------------
// UTILIDADES DE ACCESIBILIDAD GLOBALES
// -----------------------------------------------------------------------------

// Mejora del contraste para usuarios con preferencias de alto contraste
@media (prefers-contrast: high) {
   :root {
      --text-primary: #{$black};
      --text-secondary: #{$gray-800};
   }
}

// Respeto por la preferencia de movimiento reducido
@media (prefers-reduced-motion: reduce) {
   *,
   *::before,
   *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
   }
}

// Mejora de la legibilidad en pantallas de alta densidad
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
   body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
   }
}

// -----------------------------------------------------------------------------
// ESTILOS PARA MODO OSCURO
// -----------------------------------------------------------------------------

:root {
   @media (prefers-color-scheme: dark) {
      // Los estilos de modo oscuro se aplican automáticamente
      // a través de las variables CSS personalizadas

      // Ajustes específicos para modo oscuro
      code {
         background-color: $gray-800;
         color: $primary-300;
      }

      pre {
         background-color: $gray-800;
      }

      // Mejora del contraste en imágenes para modo oscuro
      img {
         opacity: 0.9;
      }
   }
}

// -----------------------------------------------------------------------------
// SCROLLBAR PERSONALIZADO
// -----------------------------------------------------------------------------

// Webkit scrollbar
::-webkit-scrollbar {
   width: 8px;
   height: 8px;
}

::-webkit-scrollbar-track {
   background: var(--background-secondary);
}

::-webkit-scrollbar-thumb {
   background: $gray-400;
   border-radius: $border-radius-full;

   &:hover {
      background: $gray-500;
   }
}

// Los estilos de scrollbar para tema oscuro se manejan en la sección de temas

// -----------------------------------------------------------------------------
// SELECCIÓN DE TEXTO
// -----------------------------------------------------------------------------

::selection {
   background-color: rgba($primary-500, 0.2);
   color: $primary-900;
}

::-moz-selection {
   background-color: rgba($primary-500, 0.2);
   color: $primary-900;
}

// -----------------------------------------------------------------------------
// CLASES DE UTILIDAD ADICIONALES
// -----------------------------------------------------------------------------

// Clase para ocultar elementos visualmente pero mantener accesibilidad
.visually-hidden {
   @include sr-only;
}

// -----------------------------------------------------------------------------
// ESTILOS ESPECÍFICOS PARA TEMAS
// -----------------------------------------------------------------------------

// Estilos para tema claro
[data-theme='light'],
.light-theme {
   --primary-color: #{$primary-500};
   --primary-hover: #{$primary-600};
   --background-primary: #{$background-primary};
   --background-secondary: #{$background-secondary};
   --text-primary: #{$text-primary};
   --text-secondary: #{$text-secondary};
}

// Estilos para tema oscuro
[data-theme='dark'],
.dark-theme {
   --primary-color: #{$dark-primary-500};
   --primary-hover: #{$dark-primary-400};
   --background-primary: #{$dark-background-primary};
   --background-secondary: #{$dark-background-secondary};
   --text-primary: #{$dark-text-primary};
   --text-secondary: #{$dark-text-secondary};

   // Ajustes específicos para modo oscuro
   img {
      opacity: 0.9;
      filter: brightness(0.9);
   }

   // Scrollbar para tema oscuro
   ::-webkit-scrollbar-track {
      background: $dark-background-secondary;
   }

   ::-webkit-scrollbar-thumb {
      background: $dark-primary-600;

      &:hover {
         background: $dark-primary-500;
      }
   }
}

// -----------------------------------------------------------------------------
// ESTILOS PARA EL BOTÓN TOGGLE DE TEMA
// -----------------------------------------------------------------------------

.theme-toggle-btn {
   position: relative;
   border-radius: $border-radius-full !important;
   transition: all $transition-base;
   color: var(--text-primary) !important;
   background-color: transparent !important;
   border: 1px solid transparent;

   &:hover {
      background-color: rgba(var(--primary-color), 0.1) !important;
      border-color: rgba(var(--primary-color), 0.2);
      transform: scale(1.05);
   }

   &:focus {
      outline: 2px solid var(--primary-color);
      outline-offset: 2px;
   }

   mat-icon {
      transition: transform $transition-base;
   }

   &:hover mat-icon {
      transform: rotate(180deg);
   }
}

// Clase para elementos que solo se muestran en modo oscuro
.dark-only {
   display: none;

   [data-theme='dark'] & {
      display: block;
   }
}

// Clase para elementos que solo se muestran en modo claro
.light-only {
   display: block;

   [data-theme='dark'] & {
      display: none;
   }
}

// Clase para contenido principal accesible
.main-content {
   min-height: 100vh;
}
